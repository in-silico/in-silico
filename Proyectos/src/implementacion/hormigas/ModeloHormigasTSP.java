package implementacion.hormigas;

import genericos.hormigas.Hormigas;
import genericos.hormigas.ModeloHormigas;

import java.awt.BorderLayout;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Random;

import javax.swing.ButtonGroup;
import javax.swing.JApplet;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

public class ModeloHormigasTSP implements ModeloHormigas
{
    static int M = 100; 
    static int Q = 1;   
    static int inicial = 4000;
    static int numIteraciones = 300000;
    static double a = 0.1;    
    static double b = 5;
    static double p = 0.001;
    static double e = 0.1;
    static Random azar = new Random();
    
    static double[][] datosPrueba = {{Double.POSITIVE_INFINITY, 241.17421089328766, 170.0, 197.00253805471644, 284.50834785643815, 246.45486402179202, 112.94689017409908, 71.11258679024411, 378.50231174987556, 117.74548823628021, 367.0490430446591, 137.71347065556077, 128.4445405612866, 236.47621444872632, 264.62237244798484, 118.0889495253472, 264.9396157617807, 178.22738285684386, 169.5228598154243, 275.53039759707093, 311.66969695496545, 124.45882853377658, 200.26232796010336, 203.00246303924493, 276.8284667443, 367.1511950137164, 76.2954782408499, 333.9970059746045, 105.01904589168576, 35.35533905932738, 101.78899744078434, 344.74628351876396, 329.6558811852141, 307.0977043222564, 182.3211452355431, 257.2003110418026, 258.80494585691366, 231.46706029152398, 96.88137075826292, 94.92101980067429},
                                     {241.17421089328766, Double.POSITIVE_INFINITY, 119.8874472161285, 113.84638773364749, 50.99019513592785, 196.0025510038071, 132.0, 258.5652722234755, 268.2927505543152, 151.47607071745688, 169.7056274847714, 244.49948875202173, 200.7710138441304, 54.037024344425184, 139.17614738165446, 298.0805260328155, 192.15098230297966, 158.05062480104277, 253.15805339747737, 37.36308338453881, 73.35529974037323, 197.9520143873257, 212.13203435596427, 51.66236541235796, 164.24676556937126, 146.57762448614045, 226.87441459979573, 266.092089322475, 136.7186892857008, 222.40728405337808, 187.72320048411703, 176.87566254292872, 199.44924166313595, 65.92419889539804, 158.47397262642215, 195.63486396856774, 227.50164834567684, 225.44178849538966, 144.3918280236108, 262.6118809193522},
                                     {170.0, 119.8874472161285, Double.POSITIVE_INFINITY, 27.018512172212592, 170.67220043111882, 260.5379051117131, 69.77822009767804, 217.60744472558838, 365.0588993573503, 146.32839779072276, 287.70297183032363, 126.92123541787639, 84.34453153583817, 153.91231269784754, 229.53213282675696, 266.58019431308094, 266.6027006614899, 41.340053217188775, 262.6670896781704, 156.11854470241516, 169.49926253526885, 197.18519214180358, 249.0, 121.2023102090055, 252.68557536986555, 205.22183119736556, 124.95199078045935, 346.5862086119412, 84.17244204607586, 168.67127793433, 81.78630692236935, 287.76726707532254, 298.93310288424067, 174.9085475327035, 198.90952717253137, 265.39781461044475, 288.0277764383151, 273.73162038756135, 92.57429448826494, 155.2610704587599},
                                     {197.00253805471644, 113.84638773364749, 27.018512172212592, Double.POSITIVE_INFINITY, 162.88953311984167, 273.5141678231678, 94.87360012142472, 243.9446658568291, 371.1091483647365, 167.72000476985446, 283.5507009337131, 144.12841496387864, 104.01922899156675, 155.5538491969903, 236.01906702637396, 292.61749776799064, 277.5626055505316, 46.61544808322666, 284.67525357852935, 147.61097520171052, 153.07514494521962, 219.46298093300382, 266.82765973564284, 126.64912159190051, 260.06922155457, 181.33394607739612, 149.61617559608987, 357.0154058300566, 108.90821823902914, 195.34584715319647, 106.56922632730333, 288.0624932197873, 303.65934861288235, 161.48374531202822, 215.00930212434997, 277.3625785862253, 302.20853727186466, 290.0017241328058, 117.66052864066182, 177.9100896520487},
                                     {284.50834785643815, 50.99019513592785, 170.67220043111882, 162.88953311984167, Double.POSITIVE_INFINITY, 191.47062437878037, 179.35439777156287, 293.50298124550625, 238.2120903732638, 183.73078130786905, 122.80065146407001, 295.4657340538831, 251.71610993339303, 57.688820407423826, 123.3288287465668, 328.5665838152139, 181.79658962697843, 208.08652046684813, 270.96309711840837, 15.620499351813308, 59.135437767890075, 223.70739817896055, 220.90722034374522, 82.56512580987206, 146.74126890551273, 140.9432509913121, 276.1593742750733, 247.09714688761585, 182.17573932881405, 262.3833073958784, 237.92435772740882, 138.2208377922808, 170.18813119603846, 38.07886552931954, 171.49344010777787, 187.94946129212502, 222.71281956816046, 227.437903613272, 189.01058171435798, 312.385979198811},
                                     {246.45486402179202, 196.0025510038071, 260.5379051117131, 273.5141678231678, 191.47062437878037, Double.POSITIVE_INFINITY, 210.2974084481309, 206.54539452623968, 132.74034804836094, 138.40520221436765, 178.70926109186397, 340.4717315725345, 303.71368095625854, 143.29340529138108, 72.83543093852057, 212.8966885604377, 23.0, 299.8683044271268, 121.00413216084813, 197.89138435010253, 250.01199971201382, 124.16923934694937, 58.215118311311535, 153.26447729333762, 59.481089431852205, 331.9096262538946, 289.70502239346837, 90.69729874698585, 199.4818287463798, 211.4000946073582, 274.2498860528478, 136.12494260788506, 98.00510190801293, 229.53213282675696, 68.24221567329127, 12.165525060596439, 31.622776601683793, 42.485291572496, 197.59048560090133, 324.64442086689246},
                                     {112.94689017409908, 132.0, 69.77822009767804, 94.87360012142472, 179.35439777156287, 210.2974084481309, Double.POSITIVE_INFINITY, 150.0133327407934, 328.4585209733491, 81.09870529176159, 279.1128803907122, 134.41726079637243, 94.30270409696638, 140.7693148381422, 196.5756851698602, 198.04039991880444, 220.91174708466727, 98.32598842625484, 194.81529714065064, 168.2973558912914, 199.9124808509964, 129.40247292845683, 188.403821617291, 104.17773274553444, 216.27991122617004, 254.52111896658005, 98.79271228182775, 300.1283058959951, 14.560219778561036, 103.23274674249446, 67.94115100585212, 267.72560579817537, 267.3200329193456, 197.3068675946177, 143.6175476743702, 217.36835096213983, 234.3608329051593, 215.87033144922904, 22.825424421026653, 136.1653406708183},
                                     {71.11258679024411, 258.5652722234755, 217.60744472558838, 243.9446658568291, 293.50298124550625, 206.54539452623968, 150.0133327407934, Double.POSITIVE_INFINITY, 338.5513255032389, 109.89540481748998, 354.1412147717348, 208.24024587000469, 194.28072472584614, 238.66294224282078, 242.7385424690525, 50.15974481593781, 227.8815481779953, 235.29555881911583, 107.16809226630845, 287.92360097775935, 331.86895003901765, 84.92938243034621, 152.31546211727817, 211.62466774929618, 248.92770034690795, 397.7247792129628, 146.34206503941374, 287.0836115141371, 137.18600511714013, 50.566787519082126, 164.43843832875572, 324.0015432062014, 299.4461554269816, 322.55542159449124, 153.05554547287727, 218.38727069131113, 211.4734025829253, 181.94504664870655, 127.98828071350908, 165.60495161679194},
                                     {378.50231174987556, 268.2927505543152, 365.0588993573503, 371.1091483647365, 238.2120903732638, 132.74034804836094, 328.4585209733491, 338.5513255032389, Double.POSITIVE_INFINITY, 266.2480046873591, 147.7193284577208, 462.47702645645006, 422.6038333948238, 217.27632176562636, 135.5322839769182, 339.9779404608481, 113.6001760562016, 406.3065345278119, 244.36448187083164, 251.3105648396024, 293.04265901059523, 256.90854403853524, 186.85020738548835, 244.6752950340512, 112.89818421923357, 369.06368014205896, 416.4864943788694, 63.387695966961914, 320.09529830973776, 343.6771741038383, 395.63746030930895, 106.36728820459794, 68.8839603971781, 270.04629232781554, 196.93907687404246, 121.49074038789952, 129.6919426949878, 159.70284906663375, 320.14059411452337, 452.6566027354511},
                                     {117.74548823628021, 151.47607071745688, 146.32839779072276, 167.72000476985446, 183.73078130786905, 138.40520221436765, 81.09870529176159, 109.89540481748998, 266.2480046873591, Double.POSITIVE_INFINITY, 251.04780421266383, 203.11819219360927, 168.90825912311098, 128.86038956948718, 146.93195704134618, 146.63219291819925, 153.45683432157722, 179.0446871593793, 117.00427342623003, 178.70926109186397, 224.66419385384935, 52.32590180780452, 108.17116066678771, 102.45974819410792, 160.18114745499858, 295.2558212804618, 151.34397906755325, 229.01964981197574, 67.47592163134935, 86.68333173107735, 138.00362314084367, 227.05505940189926, 213.17832910500073, 213.80598681982693, 70.2922470831599, 147.5127113166862, 158.35403373454054, 136.95619737711763, 62.81719509815764, 186.72439583514523},
                                     {367.0490430446591, 169.7056274847714, 287.70297183032363, 283.5507009337131, 122.80065146407001, 178.70926109186397, 279.1128803907122, 354.1412147717348, 147.7193284577208, 251.04780421266383, Double.POSITIVE_INFINITY, 407.25913126656843, 363.633056803146, 138.70832707519762, 114.58621208504974, 375.7286254732264, 157.8670326572334, 327.2002444986862, 293.95407804621453, 138.40520221436765, 163.52675622050356, 271.1180554666177, 231.60310878742538, 175.35392781457733, 119.4026800369238, 230.05434140654683, 377.71947262485685, 184.6212338816963, 277.07760645710795, 337.6758800980609, 344.61572802180694, 47.38143096192854, 97.67292357659824, 142.0774436706967, 203.55343278854326, 168.62087652482418, 201.1889659002203, 221.14248800264502, 281.3698633471609, 415.21681083501426},
                                     {137.71347065556077, 244.49948875202173, 126.92123541787639, 144.12841496387864, 295.4657340538831, 340.4717315725345, 134.41726079637243, 208.24024587000469, 462.47702645645006, 203.11819219360927, 407.25913126656843, Double.POSITIVE_INFINITY, 43.829214001622255, 269.05018119302576, 330.9531688925187, 255.76551761330143, 353.17134651610684, 100.0, 295.9408724728641, 281.5386296762844, 296.00168918436935, 237.49736840647307, 309.0954545120326, 232.84544230025205, 350.6180257773408, 322.18783341398847, 62.0, 431.111354524559, 142.43595051811886, 162.3730273167314, 66.84309986827361, 400.2811511925087, 401.72627496841676, 301.8111992620552, 272.3416971379888, 348.63304490538474, 361.47060738046184, 339.1577803913689, 143.1258187749506, 55.0},
                                     {128.4445405612866, 200.7710138441304, 84.34453153583817, 104.01922899156675, 251.71610993339303, 303.71368095625854, 94.30270409696638, 194.28072472584614, 422.6038333948238, 168.90825912311098, 363.633056803146, 43.829214001622255, Double.POSITIVE_INFINITY, 225.63909235768523, 289.74644087546613, 243.9610624669437, 315.0507895562238, 64.19501538281614, 270.7397274136177, 237.87601812709073, 253.84247083575278, 208.78697277368624, 276.739950133695, 189.62067397834025, 310.16124838541646, 284.6928169097352, 57.3149195236284, 393.9543120718442, 104.23531071570709, 144.734239211045, 32.14031735997639, 357.5024475440693, 360.58424813072463, 258.8223328849348, 236.1630792482178, 311.20732639190874, 326.4383555895355, 305.864349017665, 106.62082348209472, 75.8946638440411},
                                     {236.47621444872632, 54.037024344425184, 153.91231269784754, 155.5538491969903, 57.688820407423826, 143.29340529138108, 140.7693148381422, 238.66294224282078, 217.27632176562636, 128.86038956948718, 138.70832707519762, 269.05018119302576, 225.63909235768523, Double.POSITIVE_INFINITY, 85.47514258543241, 271.8602582210206, 138.31124321616085, 194.90510511528424, 213.5720019103628, 58.137767414994535, 110.60289327137876, 166.3640586184408, 165.60193235587562, 36.6742416417845, 110.54863183232979, 191.23022773609824, 239.54957733212555, 212.19095173922943, 139.84276885130672, 211.23683390924037, 205.91260281974002, 133.86933928274988, 148.92951352905172, 93.34880824091971, 114.5512985522207, 142.20056258679148, 174.9085475327035, 175.31685600648902, 145.04137340772803, 276.92778842145833},
                                     {264.62237244798484, 139.17614738165446, 229.53213282675696, 236.01906702637396, 123.3288287465668, 72.83543093852057, 196.5756851698602, 242.7385424690525, 135.5322839769182, 146.93195704134618, 114.58621208504974, 330.9531688925187, 289.74644087546613, 85.47514258543241, Double.POSITIVE_INFINITY, 261.5530538915575, 59.0592922409336, 270.79512551004314, 179.98055450520204, 132.21951444472938, 182.4636950190366, 158.38244852255568, 118.70130580579136, 109.38464243210744, 25.079872407968907, 264.1685068285014, 289.8033816227823, 127.0, 189.9315666233499, 232.43278598338918, 264.4730610100016, 81.39410298049853, 70.83784299369935, 160.822883943797, 90.08884503644167, 66.61080993352356, 102.20078277586722, 113.85077953180645, 191.47062437878037, 327.0244639166923},
                                     {118.0889495253472, 298.0805260328155, 266.58019431308094, 292.61749776799064, 328.5665838152139, 212.8966885604377, 198.04039991880444, 50.15974481593781, 339.9779404608481, 146.63219291819925, 375.7286254732264, 255.76551761330143, 243.9610624669437, 271.8602582210206, 261.5530538915575, Double.POSITIVE_INFINITY, 235.61409125941512, 285.33489096148054, 96.00520819205592, 324.6783023240081, 371.29637757457317, 106.7379969832674, 154.9322432549145, 248.766959220874, 263.1216448717209, 440.6007262817437, 194.32961688841976, 283.2331195323033, 184.62935844550833, 100.72239075796404, 214.448128926321, 341.0058650522011, 310.0967590930289, 360.06943774777665, 172.28464818433474, 225.06221362103412, 210.2974084481309, 180.27756377319946, 175.54771431152272, 210.02142747824567},
                                     {264.9396157617807, 192.15098230297966, 266.6027006614899, 277.5626055505316, 181.79658962697843, 23.0, 220.91174708466727, 227.8815481779953, 113.6001760562016, 153.45683432157722, 157.8670326572334, 353.17134651610684, 315.0507895562238, 138.31124321616085, 59.0592922409336, 235.61409125941512, Double.POSITIVE_INFINITY, 306.8061277093403, 144.00347218036097, 189.76301009416983, 240.87548650703334, 144.46106741956464, 81.15417426109393, 153.63918770938616, 40.36087214122113, 322.7398333023056, 304.52914474644297, 80.05623023850174, 211.0781845667619, 230.20208513391012, 286.5135249861689, 114.16216536138407, 75.0066663703967, 219.5449840010015, 83.54639429682169, 11.180339887498949, 44.598206241955516, 63.89053137985315, 210.05951537600004, 340.177894637497},
                                     {178.22738285684386, 158.05062480104277, 41.340053217188775, 46.61544808322666, 208.08652046684813, 299.8683044271268, 98.32598842625484, 235.29555881911583, 406.3065345278119, 179.0446871593793, 327.2002444986862, 100.0, 64.19501538281614, 194.90510511528424, 270.79512551004314, 285.33489096148054, 306.8061277093403, Double.POSITIVE_INFINITY, 292.8839360565888, 193.03885619221847, 199.5419755339713, 227.6071176391459, 284.85083815920217, 162.53307355735325, 293.82477771624366, 222.27235545609355, 117.66052864066182, 386.855270094644, 112.64102272262978, 184.83776670366908, 77.89736837660179, 328.6715685908959, 340.2704806473815, 208.06249061279644, 236.57979626333267, 305.19665791092797, 326.58995697969647, 310.85044635644323, 119.5198728245642, 140.089257261219},
                                     {169.5228598154243, 253.15805339747737, 262.6670896781704, 284.67525357852935, 270.96309711840837, 121.00413216084813, 194.81529714065064, 107.16809226630845, 244.36448187083164, 117.00427342623003, 293.95407804621453, 295.9408724728641, 270.7397274136177, 213.5720019103628, 179.98055450520204, 96.00520819205592, 144.00347218036097, 292.8839360565888, Double.POSITIVE_INFINITY, 271.15493725912495, 322.45309736456244, 65.5133574166368, 63.28506932918696, 201.5341162185698, 176.23847480048164, 399.71239660535923, 235.51008470976353, 187.2431574183687, 180.34688796871433, 136.7040599250805, 238.6063704095094, 254.8489748851268, 219.0, 306.7719022335651, 99.86490875177326, 133.00375934536586, 114.72575996697516, 84.92938243034621, 173.40126873814967, 262.6404386228442},
                                     {275.53039759707093, 37.36308338453881, 156.11854470241516, 147.61097520171052, 15.620499351813308, 197.89138435010253, 168.2973558912914, 287.92360097775935, 251.3105648396024, 178.70926109186397, 138.40520221436765, 281.5386296762844, 237.87601812709073, 58.137767414994535, 132.21951444472938, 324.6783023240081, 189.76301009416983, 193.03885619221847, 271.15493725912495, Double.POSITIVE_INFINITY, 52.69724850502159, 221.11761576138613, 223.6515146382872, 76.32168761236873, 156.348968656656, 134.18271125595876, 264.0378760708395, 257.6373420139247, 172.04650534085255, 254.78814729103863, 225.07776433935007, 152.76452467768817, 182.8879438344693, 35.805027579936315, 172.58621034138272, 195.2255106280939, 229.3926764306132, 232.2154172315008, 179.27911200137063, 299.90831932442285},
                                     {311.66969695496545, 73.35529974037323, 169.49926253526885, 153.07514494521962, 59.135437767890075, 250.01199971201382, 199.9124808509964, 331.86895003901765, 293.04265901059523, 224.66419385384935, 163.52675622050356, 296.00168918436935, 253.84247083575278, 110.60289327137876, 182.4636950190366, 371.29637757457317, 240.87548650703334, 199.5419755339713, 322.45309736456244, 52.69724850502159, Double.POSITIVE_INFINITY, 270.0, 276.20463428407567, 123.2233744059949, 205.7668583615933, 81.93900170248598, 289.0069203323685, 305.5552323230614, 206.65188119153427, 294.76770515102226, 247.29132617218906, 189.2828571212935, 226.2675407565124, 23.0, 224.64416306683776, 246.85623346393342, 281.40007107319644, 284.8596145472362, 214.89532335534898, 322.6205201161265},
                                     {124.45882853377658, 197.9520143873257, 197.18519214180358, 219.46298093300382, 223.70739817896055, 124.16923934694937, 129.40247292845683, 84.92938243034621, 256.90854403853524, 52.32590180780452, 271.1180554666177, 237.49736840647307, 208.78697277368624, 166.3640586184408, 158.38244852255568, 106.7379969832674, 144.46106741956464, 227.6071176391459, 65.5133574166368, 221.11761576138613, 270.0, Double.POSITIVE_INFINITY, 75.92759709091287, 146.81961721786362, 164.0, 343.7586362551492, 179.51323071016242, 209.78083801910984, 114.9826073804208, 89.10667763978185, 176.7399219191861, 239.4159560263267, 214.75800334329801, 256.8598839834668, 68.3593446428504, 135.5949851580065, 134.3800580443393, 107.16809226630845, 108.29589096544707, 210.61813787041228},
                                     {200.26232796010336, 212.13203435596427, 249.0, 266.82765973564284, 220.90722034374522, 58.215118311311535, 188.403821617291, 152.31546211727817, 186.85020738548835, 108.17116066678771, 231.60310878742538, 309.0954545120326, 276.739950133695, 165.60193235587562, 118.70130580579136, 154.9322432549145, 81.15417426109393, 284.85083815920217, 63.28506932918696, 223.6515146382872, 276.20463428407567, 75.92759709091287, Double.POSITIVE_INFINITY, 162.45922565370057, 113.1591799192624, 356.4056677439347, 253.31403435261933, 135.20724832641184, 175.32826355154492, 164.93938280471406, 245.40578640284747, 191.68985366993215, 156.11534197509224, 258.25955935840983, 54.42425929675111, 70.34912934784623, 59.405386961116584, 31.240998703626616, 170.98830369355676, 285.70089254323307},
                                     {203.00246303924493, 51.66236541235796, 121.2023102090055, 126.64912159190051, 82.56512580987206, 153.26447729333762, 104.17773274553444, 211.62466774929618, 244.6752950340512, 102.45974819410792, 175.35392781457733, 232.84544230025205, 189.62067397834025, 36.6742416417845, 109.38464243210744, 248.766959220874, 153.63918770938616, 162.53307355735325, 201.5341162185698, 76.32168761236873, 123.2233744059949, 146.81961721786362, 162.45922565370057, Double.POSITIVE_INFINITY, 133.46160496562297, 198.23723161908813, 202.97044119772713, 231.8361490363399, 103.81233067415451, 179.88885457415086, 169.30741271426953, 168.34488409215172, 177.867928531256, 111.35977729862789, 108.2266141020775, 155.0290295396317, 183.98369492974098, 178.30591689565435, 109.48972554536796, 240.30813552603666},
                                     {276.8284667443, 164.24676556937126, 252.68557536986555, 260.06922155457, 146.74126890551273, 59.481089431852205, 216.27991122617004, 248.92770034690795, 112.89818421923357, 160.18114745499858, 119.4026800369238, 350.6180257773408, 310.16124838541646, 110.54863183232979, 25.079872407968907, 263.1216448717209, 40.36087214122113, 293.82477771624366, 176.23847480048164, 156.348968656656, 205.7668583615933, 164.0, 113.1591799192624, 133.46160496562297, Double.POSITIVE_INFINITY, 287.14108030722457, 307.06513966909364, 102.0196059588548, 208.62646045025065, 243.48305895893455, 283.86792703650053, 78.63841300535, 53.0, 183.74166647769363, 96.46242791885346, 50.21951811795888, 84.95881355103778, 101.96568050084302, 209.3800372528384, 343.91859501922835},
                                     {367.1511950137164, 146.57762448614045, 205.22183119736556, 181.33394607739612, 140.9432509913121, 331.9096262538946, 254.52111896658005, 397.7247792129628, 369.06368014205896, 295.2558212804618, 230.05434140654683, 322.18783341398847, 284.6928169097352, 191.23022773609824, 264.1685068285014, 440.6007262817437, 322.7398333023056, 222.27235545609355, 399.71239660535923, 134.18271125595876, 81.93900170248598, 343.7586362551492, 356.4056677439347, 198.23723161908813, 287.14108030722457, Double.POSITIVE_INFINITY, 330.17116772970957, 385.88340207891815, 264.35771220072246, 355.8791929854849, 287.0, 263.2299375071156, 304.19894805866767, 103.40696301506973, 303.80421326900654, 328.79172738984784, 363.3235472688221, 366.2799475810818, 273.35325130680263, 359.23529893372114},
                                     {76.2954782408499, 226.87441459979573, 124.95199078045935, 149.61617559608987, 276.1593742750733, 289.70502239346837, 98.79271228182775, 146.34206503941374, 416.4864943788694, 151.34397906755325, 377.71947262485685, 62.0, 57.3149195236284, 239.54957733212555, 289.8033816227823, 194.32961688841976, 304.52914474644297, 117.66052864066182, 235.51008470976353, 264.0378760708395, 289.0069203323685, 179.51323071016242, 253.31403435261933, 202.97044119772713, 307.06513966909364, 330.17116772970957, Double.POSITIVE_INFINITY, 380.2170432792302, 101.21264743103995, 100.60318086422517, 43.174066289845804, 364.44615514503647, 359.5385931996731, 290.07929950273945, 221.63483480716653, 298.8394217635953, 308.1379561170613, 284.0422503783548, 98.4733466477097, 37.589892258425},
                                     {333.9970059746045, 266.092089322475, 346.5862086119412, 357.0154058300566, 247.09714688761585, 90.69729874698585, 300.1283058959951, 287.0836115141371, 63.387695966961914, 229.01964981197574, 184.6212338816963, 431.111354524559, 393.9543120718442, 212.19095173922943, 127.0, 283.2331195323033, 80.05623023850174, 386.855270094644, 187.2431574183687, 257.6373420139247, 305.5552323230614, 209.78083801910984, 135.20724832641184, 231.8361490363399, 102.0196059588548, 385.88340207891815, 380.2170432792302, Double.POSITIVE_INFINITY, 289.74644087546613, 298.67038688159226, 364.7807560713695, 137.63720427268203, 87.66413177577246, 283.0070670495703, 158.93709447451215, 82.76472678623425, 75.8023746329889, 105.152270541344, 288.12497288503124, 414.84454919885354},
                                     {105.01904589168576, 136.7186892857008, 84.17244204607586, 108.90821823902914, 182.17573932881405, 199.4818287463798, 14.560219778561036, 137.18600511714013, 320.09529830973776, 67.47592163134935, 277.07760645710795, 142.43595051811886, 104.23531071570709, 139.84276885130672, 189.9315666233499, 184.62935844550833, 211.0781845667619, 112.64102272262978, 180.34688796871433, 172.04650534085255, 206.65188119153427, 114.9826073804208, 175.32826355154492, 103.81233067415451, 208.62646045025065, 264.35771220072246, 101.21264743103995, 289.74644087546613, Double.POSITIVE_INFINITY, 91.80958555619343, 75.6042326857432, 263.3040068058213, 260.35360569809666, 202.5487595617411, 132.09844813622905, 207.01932276963907, 222.64994947226015, 203.30272993740147, 9.219544457292887, 138.7984149765407},
                                     {35.35533905932738, 222.40728405337808, 168.67127793433, 195.34584715319647, 262.3833073958784, 211.4000946073582, 103.23274674249446, 50.566787519082126, 343.6771741038383, 86.68333173107735, 337.6758800980609, 162.3730273167314, 144.734239211045, 211.23683390924037, 232.43278598338918, 100.72239075796404, 230.20208513391012, 184.83776670366908, 136.7040599250805, 254.78814729103863, 294.76770515102226, 89.10667763978185, 164.93938280471406, 179.88885457415086, 243.48305895893455, 355.8791929854849, 100.60318086422517, 298.67038688159226, 91.80958555619343, Double.POSITIVE_INFINITY, 114.28473213863697, 313.2091952673165, 296.096268129134, 287.9392296996017, 148.12494725737457, 222.26560687609768, 223.45021816950637, 196.1555505204989, 82.68010643437755, 125.93649193144932},
                                     {101.78899744078434, 187.72320048411703, 81.78630692236935, 106.56922632730333, 237.92435772740882, 274.2498860528478, 67.94115100585212, 164.43843832875572, 395.63746030930895, 138.00362314084367, 344.61572802180694, 66.84309986827361, 32.14031735997639, 205.91260281974002, 264.4730610100016, 214.448128926321, 286.5135249861689, 77.89736837660179, 238.6063704095094, 225.07776433935007, 247.29132617218906, 176.7399219191861, 245.40578640284747, 169.30741271426953, 283.86792703650053, 287.0, 43.174066289845804, 364.7807560713695, 75.6042326857432, 114.28473213863697, Double.POSITIVE_INFINITY, 335.20292361493506, 335.1715978420606, 249.46743274423616, 206.30559856678636, 282.17193340231415, 296.096268129134, 274.83813418083014, 76.66159403508382, 75.4254598925323},
                                     {344.74628351876396, 176.87566254292872, 287.76726707532254, 288.0624932197873, 138.2208377922808, 136.12494260788506, 267.72560579817537, 324.0015432062014, 106.36728820459794, 227.05505940189926, 47.38143096192854, 400.2811511925087, 357.5024475440693, 133.86933928274988, 81.39410298049853, 341.0058650522011, 114.16216536138407, 328.6715685908959, 254.8489748851268, 152.76452467768817, 189.2828571212935, 239.4159560263267, 191.68985366993215, 168.34488409215172, 78.63841300535, 263.2299375071156, 364.44615514503647, 137.63720427268203, 263.3040068058213, 313.2091952673165, 335.20292361493506, Double.POSITIVE_INFINITY, 50.32891812864648, 166.4602054546371, 171.05846953600397, 125.22779244241272, 156.1089363233252, 178.03651310896873, 266.1879035568671, 401.9950248448356},
                                     {329.6558811852141, 199.44924166313595, 298.93310288424067, 303.65934861288235, 170.18813119603846, 98.00510190801293, 267.3200329193456, 299.4461554269816, 68.8839603971781, 213.17832910500073, 97.67292357659824, 401.72627496841676, 360.58424813072463, 148.92951352905172, 70.83784299369935, 310.0967590930289, 75.0066663703967, 340.2704806473815, 219.0, 182.8879438344693, 226.2675407565124, 214.75800334329801, 156.11534197509224, 177.867928531256, 53.0, 304.19894805866767, 359.5385931996731, 87.66413177577246, 260.35360569809666, 296.096268129134, 335.1715978420606, 50.32891812864648, Double.POSITIVE_INFINITY, 203.29781110479277, 148.38463532320318, 86.00581375697809, 111.8257573191436, 137.18600511714013, 261.5205536855564, 396.531209364408},
                                     {307.0977043222564, 65.92419889539804, 174.9085475327035, 161.48374531202822, 38.07886552931954, 229.53213282675696, 197.3068675946177, 322.55542159449124, 270.04629232781554, 213.80598681982693, 142.0774436706967, 301.8111992620552, 258.8223328849348, 93.34880824091971, 160.822883943797, 360.06943774777665, 219.5449840010015, 208.06249061279644, 306.7719022335651, 35.805027579936315, 23.0, 256.8598839834668, 258.25955935840983, 111.35977729862789, 183.74166647769363, 103.40696301506973, 290.07929950273945, 283.0070670495703, 202.5487595617411, 287.9392296996017, 249.46743274423616, 166.4602054546371, 203.29781110479277, Double.POSITIVE_INFINITY, 207.8942038634074, 225.88713996153035, 260.7393334347543, 265.42418879973997, 210.2974084481309, 324.8584307048226},
                                     {182.3211452355431, 158.47397262642215, 198.90952717253137, 215.00930212434997, 171.49344010777787, 68.24221567329127, 143.6175476743702, 153.05554547287727, 196.93907687404246, 70.2922470831599, 203.55343278854326, 272.3416971379888, 236.1630792482178, 114.5512985522207, 90.08884503644167, 172.28464818433474, 83.54639429682169, 236.57979626333267, 99.86490875177326, 172.58621034138272, 224.64416306683776, 68.3593446428504, 54.42425929675111, 108.2266141020775, 96.46242791885346, 303.80421326900654, 221.63483480716653, 158.93709447451215, 132.09844813622905, 148.12494725737457, 206.30559856678636, 171.05846953600397, 148.38463532320318, 207.8942038634074, Double.POSITIVE_INFINITY, 77.23341245859851, 90.75791976461338, 75.0066663703967, 129.71121771072848, 256.8988127648705},
                                     {257.2003110418026, 195.63486396856774, 265.39781461044475, 277.3625785862253, 187.94946129212502, 12.165525060596439, 217.36835096213983, 218.38727069131113, 121.49074038789952, 147.5127113166862, 168.62087652482418, 348.63304490538474, 311.20732639190874, 142.20056258679148, 66.61080993352356, 225.06221362103412, 11.180339887498949, 305.19665791092797, 133.00375934536586, 195.2255106280939, 246.85623346393342, 135.5949851580065, 70.34912934784623, 155.0290295396317, 50.21951811795888, 328.79172738984784, 298.8394217635953, 82.76472678623425, 207.01932276963907, 222.26560687609768, 282.17193340231415, 125.22779244241272, 86.00581375697809, 225.88713996153035, 77.23341245859851, Double.POSITIVE_INFINITY, 35.608987629529715, 52.81098370604357, 205.54804791094466, 334.1167460634082},
                                     {258.80494585691366, 227.50164834567684, 288.0277764383151, 302.20853727186466, 222.71281956816046, 31.622776601683793, 234.3608329051593, 211.4734025829253, 129.6919426949878, 158.35403373454054, 201.1889659002203, 361.47060738046184, 326.4383555895355, 174.9085475327035, 102.20078277586722, 210.2974084481309, 44.598206241955516, 326.58995697969647, 114.72575996697516, 229.3926764306132, 281.40007107319644, 134.3800580443393, 59.405386961116584, 183.98369492974098, 84.95881355103778, 363.3235472688221, 308.1379561170613, 75.8023746329889, 222.64994947226015, 223.45021816950637, 296.096268129134, 156.1089363233252, 111.8257573191436, 260.7393334347543, 90.75791976461338, 35.608987629529715, Double.POSITIVE_INFINITY, 30.083217912982647, 219.8226557932553, 341.80988868082795},
                                     {231.46706029152398, 225.44178849538966, 273.73162038756135, 290.0017241328058, 227.437903613272, 42.485291572496, 215.87033144922904, 181.94504664870655, 159.70284906663375, 136.95619737711763, 221.14248800264502, 339.1577803913689, 305.864349017665, 175.31685600648902, 113.85077953180645, 180.27756377319946, 63.89053137985315, 310.85044635644323, 84.92938243034621, 232.2154172315008, 284.8596145472362, 107.16809226630845, 31.240998703626616, 178.30591689565435, 101.96568050084302, 366.2799475810818, 284.0422503783548, 105.152270541344, 203.30272993740147, 196.1555505204989, 274.83813418083014, 178.03651310896873, 137.18600511714013, 265.42418879973997, 75.0066663703967, 52.81098370604357, 30.083217912982647, Double.POSITIVE_INFINITY, 199.55199823604875, 316.7349049283959},
                                     {96.88137075826292, 144.3918280236108, 92.57429448826494, 117.66052864066182, 189.01058171435798, 197.59048560090133, 22.825424421026653, 127.98828071350908, 320.14059411452337, 62.81719509815764, 281.3698633471609, 143.1258187749506, 106.62082348209472, 145.04137340772803, 191.47062437878037, 175.54771431152272, 210.05951537600004, 119.5198728245642, 173.40126873814967, 179.27911200137063, 214.89532335534898, 108.29589096544707, 170.98830369355676, 109.48972554536796, 209.3800372528384, 273.35325130680263, 98.4733466477097, 288.12497288503124, 9.219544457292887, 82.68010643437755, 76.66159403508382, 266.1879035568671, 261.5205536855564, 210.2974084481309, 129.71121771072848, 205.54804791094466, 219.8226557932553, 199.55199823604875, Double.POSITIVE_INFINITY, 135.91173606425605},
                                     {94.92101980067429, 262.6118809193522, 155.2610704587599, 177.9100896520487, 312.385979198811, 324.64442086689246, 136.1653406708183, 165.60495161679194, 452.6566027354511, 186.72439583514523, 415.21681083501426, 55.0, 75.8946638440411, 276.92778842145833, 327.0244639166923, 210.02142747824567, 340.177894637497, 140.089257261219, 262.6404386228442, 299.90831932442285, 322.6205201161265, 210.61813787041228, 285.70089254323307, 240.30813552603666, 343.91859501922835, 359.23529893372114, 37.589892258425, 414.84454919885354, 138.7984149765407, 125.93649193144932, 75.4254598925323, 401.9950248448356, 396.531209364408, 324.8584307048226, 256.8988127648705, 334.1167460634082, 341.80988868082795, 316.7349049283959, 135.91173606425605, Double.POSITIVE_INFINITY},
                                     };
    
    static ArrayList <Ciudad> ciudadesIniciales = new ArrayList <Ciudad> ();
    
    static
    {
    	ciudadesIniciales.add(new Ciudad(160, 370));
    	ciudadesIniciales.add(new Ciudad(121, 132));
    	ciudadesIniciales.add(new Ciudad(58, 234));
    	ciudadesIniciales.add(new Ciudad(41, 213));
    	ciudadesIniciales.add(new Ciudad(143, 86));
    	ciudadesIniciales.add(new Ciudad(312, 176));
    	ciudadesIniciales.add(new Ciudad(121, 264));
    	ciudadesIniciales.add(new Ciudad(231, 366));
    	ciudadesIniciales.add(new Ciudad(380, 62));
    	ciudadesIniciales.add(new Ciudad(202, 260));
    	ciudadesIniciales.add(new Ciudad(241, 12));
    	ciudadesIniciales.add(new Ciudad(23, 356));
    	ciudadesIniciales.add(new Ciudad(43, 317));
    	ciudadesIniciales.add(new Ciudad(175, 134));
    	ciudadesIniciales.add(new Ciudad(260, 125));
    	ciudadesIniciales.add(new Ciudad(277, 386));
    	ciudadesIniciales.add(new Ciudad(312, 153));
    	ciudadesIniciales.add(new Ciudad(23, 256));
    	ciudadesIniciales.add(new Ciudad(313, 297));
    	ciudadesIniciales.add(new Ciudad(131, 96));
    	ciudadesIniciales.add(new Ciudad(87, 67));
    	ciudadesIniciales.add(new Ciudad(249, 283));
    	ciudadesIniciales.add(new Ciudad(307, 234));
    	ciudadesIniciales.add(new Ciudad(159, 167));
    	ciudadesIniciales.add(new Ciudad(285, 123));
    	ciudadesIniciales.add(new Ciudad(12, 34));
    	ciudadesIniciales.add(new Ciudad(85, 356));
    	ciudadesIniciales.add(new Ciudad(387, 125));
    	ciudadesIniciales.add(new Ciudad(135, 268));
    	ciudadesIniciales.add(new Ciudad(185, 345));
    	ciudadesIniciales.add(new Ciudad(75, 314));
    	ciudadesIniciales.add(new Ciudad(275, 45));
    	ciudadesIniciales.add(new Ciudad(313, 78));
    	ciudadesIniciales.add(new Ciudad(110, 67));
    	ciudadesIniciales.add(new Ciudad(256, 215));
    	ciudadesIniciales.add(new Ciudad(314, 164));
    	ciudadesIniciales.add(new Ciudad(342, 186));
    	ciudadesIniciales.add(new Ciudad(331, 214));
    	ciudadesIniciales.add(new Ciudad(141, 275));
    	ciudadesIniciales.add(new Ciudad(67, 389));
    }
    
	public int escoger(double [] m)
	{
		double q = 0.9;
		double q0 = azar.nextDouble();
		if(q <= q0)
		{
		    return probabilistico(m);
		}
		else
		{
		    return deterministico(m, 3);
		}
	}

    /**
     * Opción probabilistica. Escoge entre torneo, ruleta, y el azar.
     * @param  m: Vector con las probabilidades de cada vecino
     * @return indice: Indice escogido
     */
	public static int probabilistico(double [] m)
	{
	    double x = azar.nextDouble();
	    if(x >= 0.1 && x < 0.5)
	    {
	        return torneo(m);
	    }
	    else if(x >= 0.5)
	    {
	        return ruleta(m);
	    }
	    else
	    {
	        return aleatorio(m);
	    }
	}
	
    /**
     * Opción deterministica. Escoge uno entre los N mas cercanos, la mitad del tiempo, la otra mitad escoge el mejor.
     * @param n: Numero de vecinos cercanos entre los cuales escoger
     * @param  m: Vector con las probabilidades de cada vecino
     * @return indice: Indice escogido
     */
	public static int deterministico(double [] m, int n)
	{
		double x = azar.nextDouble();
		if(x < 0.95)
		{
			double mejor = 0;
			int indiceMejor = 0;
			for(int i = 0; i < m.length; i++)
			{
				if(m[i] > mejor)
				{
					mejor = m[i];
					indiceMejor = i;
				}
			}
			return indiceMejor;
		}
		if(m.length < n)
			return probabilistico(m);
		class Valor implements Comparable <Valor>
		{
			int indice; 
			double probabilidad;
			
			public Valor(int indice, double probabilidad)
			{
				this.indice = indice;
				this.probabilidad = probabilidad;
			}
			
			@Override
			public int compareTo(Valor otro) 
			{
				return new Double(probabilidad).compareTo(otro.probabilidad);
			}
		}
		Valor[] valores = new Valor[m.length];
		for(int i = 0; i < m.length; i++)
		{
			valores[i] = new Valor(i, m[i]);
		}
		Arrays.sort(valores);
		valores = Arrays.copyOfRange(valores, valores.length - n, valores.length);
		double[] mNueva = new double[valores.length];
		for(int i = 0; i < mNueva.length; i++)
		{
			mNueva[i] = valores[i].probabilidad;
		}
		double acum = 0;
		for(int i = 0; i < mNueva.length; i++)
		{
			acum += mNueva[i];
		}
		for(int i = 0; i < mNueva.length; i++)
		{
			mNueva[i] /= acum;
		}
		return valores[probabilistico(mNueva)].indice;
	}
	
    /**
     * Torneo. Elige dos al azar y escoge el mejor entre ellos.
     * @param  m: Vector con las probabilidades de cada vecino
     * @return indice: Indice escogido
     */
	public static  int torneo(double [] m)
	{
	    int indice1 = azar.nextInt(m.length);
	    int indice2 = azar.nextInt(m.length);
	    int retornar;
	    if(m[indice1] > m[indice2])
	    {
	        retornar = indice1;
	    }
	    else
	    {
	        retornar = indice2;
	    }
	    return retornar;
	}

    /**
     * Ruleta. Elige un vecino basado en las probabilidades de cada uno.
     * @param  m: Vector con las probabilidades de cada vecino
     * @return indice: Indice escogido
     */
	public static int ruleta(double [] m)
	{
	    double acum = m[0];
	    double numero = azar.nextDouble();
	    int retorno = 0;
	    for(int i = 1;i < m.length; i++)
	    {
	        if(acum > numero)
	        {
	            retorno = i - 1;
	            break;
	        }
	        acum += m[i];
	    }
	    return retorno;
	}
	
    /**
     * Aleatorio. Elige al azar.
     * @param  m: Vector con las probabilidades de cada vecino
     * @return indice: Indice escogido
     */
	public static int aleatorio(double [] m)
	{
		int indice = azar.nextInt(m.length);
		return indice;
	}

	public double darA() 
	{
		return a;
	}

	public double darB() 
	{
		return b;
	}

	public double darE() 
	{
		return e;
	}

	public int darInicial()
	{
		return inicial;
	}

	public int darM() 
	{
		return M;
	}

	public int darNumeroIteraciones()
	{
		if(Grafico.este.termino())
		{
			return 0;
		}
		return numIteraciones;
	}

	public double darP() 
	{
		return p;
	}

	public int darQ()
	{
		return Q;
	}
	
	public static void main(String[] args) throws FileNotFoundException, IOException, ClassNotFoundException
	{
	}

	public void establecerMejorActual(ArrayList <Integer> mejorSolucion, double pesoMejor) 
	{
		Grafico.este.establecerMejorActual(mejorSolucion, pesoMejor);
	}
	
	public static class HiloHormiga implements Runnable 
	{
		ModeloHormigas modelo;
		double[][] matrizDistancias;
		
		@Override
		public void run() 
		{
			Hormigas h = new Hormigas();
			h.solucionar(matrizDistancias, modelo);
		}
	}
	
	public static class HiloGrafico implements Runnable
	{
		ArrayList<Ciudad> ciudades;
		public HiloGrafico(ArrayList <Ciudad> ciudades) 
		{
			this.ciudades = ciudades;
		}

		@Override
		public void run() 
		{
			
			JApplet applet = new JApplet();
			FramePrincipal principal = new FramePrincipal();
			principal.setVisible(true);
			applet.add(principal);
			applet.setVisible(true);
		}
	}
	
	public static class FramePrincipal extends JApplet
	{
		private static final long serialVersionUID = -4984727444905699787L;

		public void init()
		{
			final Grafico g = new Grafico();
			Grafico.este = g;
			Grafico.este.ciudades = ciudadesIniciales;
			setBounds(50, 50, 500, 500);
			ButtonGroup bg = new ButtonGroup();
		    JRadioButton modoEdicion = new JRadioButton("Modo edicion");
		    JRadioButton modoSolucion = new JRadioButton("Modo solucion");
		    bg.add(modoEdicion);
		    bg.add(modoSolucion);
		    bg.setSelected(modoEdicion.getModel(), true);
		    modoEdicion.addActionListener(Grafico.este);
		    modoSolucion.addActionListener(Grafico.este);
		    JPanel panel = new JPanel();
		    panel.add(modoEdicion);
		    panel.add(modoSolucion);
		    setLayout(new BorderLayout());
		    add(panel, BorderLayout.SOUTH);
		    add(Grafico.este, BorderLayout.CENTER);
		}
	}
}

class Ciudad
{
	int x;
	int y;
	
	public Ciudad(int x, int y)
	{
		this.x = x;
		this.y = y;
	}
}

class Lectura 
{	
	public static double[][] generarDistancias(ArrayList <Ciudad> ciudades)
	{
		double [][] datosPrueba = new double[ciudades.size()][ciudades.size()];
		for(int i = 0; i < ciudades.size(); i++)
			for(int j = 0; j < ciudades.size(); j++)
			{
				if(i == j)
				{
					datosPrueba[i][j] = Double.POSITIVE_INFINITY;
				}
				else
				{
					datosPrueba[i][j] = Math.sqrt((ciudades.get(i).x - ciudades.get(j).x) * (ciudades.get(i).x - ciudades.get(j).x) + (ciudades.get(i).y - ciudades.get(j).y) * (ciudades.get(i).y - ciudades.get(j).y));
				}
			}
		return datosPrueba;
	}
}


